<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Music Player</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" id="spotify-link" href="#" target="_blank" title="Spotify link">Listen on Spotify</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div class="card text-center">
                    <div class="card-header">
                        <h1 id="song-title-header">No song is playing</h1>
                    </div>
                    <div class="card-body">
                        <a href="#" target="_blank" class="btn btn-primary my-3" id="youtube-link" title="Original music video">Original video</a>
                        <div class="album-cover mb-3">
                            <img class="""img-fluid lazy" id="""album-cover" src="""" data-src="""" alt="""Album cover">
                        </div>
                        <div class="lyrics">
                            <pre id="lyrics" class="border p-3">
Loading lyrics...
                            </pre>
                        </div>
                        <div class="current-song">Now Playing: <span id="song-title">No song is playing</span></div>
                        <div class="audio-player mt-3">
                            <audio id="audio-player" controls>
                                <source id="""audio-source" src="""" type="""audio/mpeg">
                            </audio>
                        </div>
                    </div>
                </div>
                <ul class="list-group mt-4" id="song-list"></ul>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/17.3.1/lazyload.min.js"></script>
    <script>
        var lazyLoadInstance;

        const songs = [
            {
                title: 'Far Caspien - Finding My Way Home',
                audioFile: 'Finding My Way Home.mp3',
                lyricsFile: 'finding_my_way_home.txt',
                imageFile: 'Finding.jpg',
                youtubeLink: 'https://www.youtube.com/watch?v=TxNjyTtCKAo',
                spotifyLink: 'https://open.spotify.com/track/5Rdh332wRhjgmrqhwFJXAQ?si=f43b6afe65fa4254'
            },
            {
                title: 'Yeat - Money So Big (InstrumentalTikTok Remix)',
                audioFile: 'Yeat - Money So Big (InstrumentalTikTok Remix).mp3',
                lyricsFile: 'money_so_big.txt',
                imageFile: 'money.jpg',
                youtubeLink: 'https://www.youtube.com/watch?v=TxNjyTtCKAo',
                spotifyLink: 'https://open.spotify.com/track/5Rdh332wRhjgmrqhwFJXAQ?si=f43b6afe65fa4254'
            },
            {
                title: 'MØ - Lean On',
                audioFile: 'Major Lazer & DJ Snake Ft. MØ - Lean On.mp3',
                lyricsFile: 'lean_on.txt',
                imageFile: 'KO.jpg',
                youtubeLink: 'https://www.youtube.com/watch?v=YqeW9_5kURI',
                spotifyLink: 'https://open.spotify.com/track/4WjH9Bzt3kx7z8kl0awxh4?si=1234567890abcdef'
            },
            {
                title: 'ANOTR, Abel Balder - Relax My Eyes',
                audioFile: 'ANOTR, Abel Balder - Relax My Eyes.mp3',
                lyricsFile: 'relax_my_eyes.txt',
                imageFile: 'relax.jpg',
                youtubeLink: 'https://www.youtube.com/watch?v=3JZ4pnNtyxQ',
                spotifyLink: 'https://open.spotify.com/track/6rqhFgbbKwnb9MLmUQDhG6?si=1234567890abcdef'
            },
            {
                title: 'Wolfgang Gartner - Push and Rise (PrototypeRaptor Bootleg Remix)',
                audioFile: 'Wolfgang Gartner - Push and Rise (PrototypeRaptor Bootleg Remix).mp3',
                lyricsFile: 'push_and_rise.txt',
                imageFile: 'push.jpg',
                youtubeLink: 'https://www.youtube.com/watch?v=2vjPBrBU-TM',
                spotifyLink: 'https://open.spotify.com/track/7GhIk7Il098yCjg4BQjzvb?si=1234567890abcdef'
            },
            // ... add other songs ...
        ];

        document.addEventListener("DOMContentLoaded", function() {
            lazyLoadInstance = new LazyLoad({
                elements_selector: ".lazy"
            });

            const songList = document.getElementById('song-list');

            songs.forEach((song, index) => {
                const li = document.createElement('li');
                li.className = 'list-group-item list-group-item-action';
                li.textContent = song.title;
                li.onclick = () => playSong(index);
                songList.appendChild(li);
            });
        });

        async function playSong(index) {
            const song = songs[index];

            var audioPlayer = document.getElementById('audio-player');
            var audioSource = document.getElementById('audio-source');
            var songTitleHeader = document.getElementById('song-title-header');
            var songTitle = document.getElementById('song-title');
            var lyrics = document.getElementById('lyrics');
            var albumCover = document.getElementById('album-cover');
            var youtubeLink = document.getElementById('youtube-link');
            var spotifyLink = document.getElementById('spotify-link');

            audioSource.src = `/Music/${song.audioFile}`;
            songTitleHeader.textContent = song.title;
            songTitle.textContent = song.title;
            audioPlayer.load();
            audioPlayer.play();

            // Fetch lyrics
            try {
                let response = await fetch(`/Lyrics/${song.lyricsFile}`);
                if (response.ok) {
                    let text = await response.text();
                    lyrics.textContent = text;
                } else {
                    lyrics.textContent = "Lyrics not found.";
                }
            } catch (error) {
                lyrics.textContent = "Error loading lyrics.";
            }

            // Update album cover
            albumCover.src = `/Images/${song.imageFile}`;
            albumCover.src = `/Images/${song.imageFile}`;

            // Update YouTube and Spotify links
            youtubeLink.href = song.youtubeLink;
            spotifyLink.href = song.spotifyLink;
        }
    </script>
</body>
</html>
